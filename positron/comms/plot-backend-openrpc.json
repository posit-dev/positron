{
	"openrpc": "1.3.0",
	"info": {
		"title": "Plot Backend",
		"version": "1.0.0"
	},
	"methods": [
		{
			"name": "get_intrinsic_size",
			"summary": "Get the intrinsic size of a plot if known",
			"description": "The intrinsic size of a plot is the size that the plot would be rendered at if no size constraints were applied by Positron.",
			"params": [],
			"result": {
				"schema": {
					"name": "intrinsic_size_result",
					"type": "object",
					"description": "The intrinsic size of the plot if known",
					"properties": {
						"size": {
							"name": "intrinsic_size",
							"description": "The intrinsic size of a plot",
							"type": "object",
							"properties": {
								"width": {
									"type": "integer",
									"description": "The intrinsic width of the plot"
								},
								"height": {
									"type": "integer",
									"description": "The intrinsic height of the plot"
								},
								"unit": {
									"description": "The unit of measurement of the plot's dimensions",
									"$ref": "#/components/schemas/plot_unit"
								},
								"source": {
									"type": "string",
									"description": "The source of the intrinsic size e.g. 'Matplotlib'"
								}
							},
							"required": [
								"label",
								"width",
								"height",
								"unit",
								"source"
							]
						}
					},
					"required": []
				}
			}
		},
		{
			"name": "render",
			"summary": "Render a plot",
			"description": "Requests a plot to be rendered. TODO: intrinsic size stuff. The plot data is returned in a base64-encoded string.",
			"params": [
				{
					"name": "size",
					"description": "The requested size of the plot. If not provided, the intrinsic size of the plot will be used.",
					"schema": {
						"$ref": "#/components/schemas/plot_size"
					},
					"required": false
				},
				{
					"name": "pixel_ratio",
					"description": "The pixel ratio of the display device",
					"schema": {
						"type": "number"
					}
				},
				{
					"name": "format",
					"description": "The requested plot format",
					"schema": {
						"type": "string",
						"enum": ["png", "jpeg", "svg", "pdf"]
					},
					"required": false
				}
			],
			"result": {
				"schema": {
					"name": "plot_result",
					"type": "object",
					"description": "A rendered plot",
					"properties": {
						"data": {
							"description": "The plot data, as a base64-encoded string",
							"type": "string"
						},
						"mime_type": {
							"description": "The MIME type of the plot data",
							"type": "string"
						}
					},
					"required": ["data", "mime_type"]
				}
			}
		}
	],
	"components": {
		"schemas": {
			"plot_size": {
				"type": "object",
				"description": "The size of a plot",
				"properties": {
					"height": {
						"description": "The plot's height, in pixels",
						"type": "integer"
					},
					"width": {
						"description": "The plot's width, in pixels",
						"type": "integer"
					}
				},
				"required": [
					"height",
					"width"
				]
			},
			"plot_unit": {
				"type": "string",
				"description": "The unit of measurement of a plot's dimensions",
				"enum": ["pixels", "inches"]
			}
		}
	}
}
