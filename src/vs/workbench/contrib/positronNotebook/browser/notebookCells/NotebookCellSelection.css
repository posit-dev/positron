/*---------------------------------------------------------------------------------------------
 *  Copyright (C) 2025 Posit Software, PBC. All rights reserved.
 *  Licensed under the Elastic License 2.0. See LICENSE.txt for license information.
 *--------------------------------------------------------------------------------------------*/

/* Define common properties for the selection bar */
.positron-notebook-cell {
	--_positron-notebook-selection-bar-radius: var(--vscode-positronNotebook-cell-radius);
	--_positron-notebook-selection-bar-width: 7px;
	--_positron-notebook-selection-bar-top-offset: 5px;
	--_positron-notebook-selection-bar-inset: 0;
}

/* Base styles for selected and editing states */
.positron-notebook-cell.selected,
.positron-notebook-cell.editing {
	position: relative;
	/* Otherwise the outline is forced by monaco styles */
	outline: none !important;
}

/* Position containers relative for selection bar placement */
.positron-notebook-cell.selected .positron-notebook-editor-container,
.positron-notebook-cell.selected .positron-notebook-cell-outputs,
.positron-notebook-cell.editing .positron-notebook-editor-container,
.positron-notebook-cell.editing .positron-notebook-cell-outputs {
	position: relative;
}

/* Common base styles for all selection bars */
.positron-notebook-cell.selected .positron-notebook-editor-container::before,
.positron-notebook-cell.editing .positron-notebook-editor-container::before,
.positron-notebook-cell.selected .positron-notebook-cell-outputs::before,
.positron-notebook-cell.editing .positron-notebook-cell-outputs::before {
	content: "";
	position: absolute;
	width: var(--_positron-notebook-selection-bar-width);
	background-color: var(--vscode-focusBorder);
	z-index: 1;
	left: var(--_positron-notebook-selection-bar-inset);
	top: var(--_positron-notebook-selection-bar-inset);
	bottom: var(--_positron-notebook-selection-bar-inset);
}

/* Don't round bottom corner for editor bar to make it look like a continuous bar */
.positron-notebook-cell.selected .positron-notebook-editor-container::before,
.positron-notebook-cell.editing .positron-notebook-editor-container::before {
	border-top-left-radius: var(--_positron-notebook-selection-bar-radius);
	border-bottom-left-radius: 0;
}

/* Specific positioning for outputs bar */
.positron-notebook-cell.selected .positron-notebook-cell-outputs::before,
.positron-notebook-cell.editing .positron-notebook-cell-outputs::before {
	/* Push bar down slightly so there's a gap between the editor and outputs */
	top: var(--_positron-notebook-selection-bar-top-offset);
	/* Don't round top corner for outputs bar to make it look like a continuous bar*/
	border-top-left-radius: 0;
	border-bottom-left-radius: var(--_positron-notebook-selection-bar-radius);
}

/* When outputs are empty, round both corners of editor bar */
.positron-notebook-cell.selected:has(.positron-notebook-cell-outputs.no-outputs) .positron-notebook-editor-container::before,
.positron-notebook-cell.editing:has(.positron-notebook-cell-outputs.no-outputs) .positron-notebook-editor-container::before {
	border-bottom-left-radius: var(--_positron-notebook-selection-bar-radius);
}

/* When editor container is empty, round both corners of outputs bar (This is the case when markdown has been rendered but doesn't have an editor open) */
.positron-notebook-cell.selected:has(.positron-notebook-editor-container.editor-hidden) .positron-notebook-cell-outputs::before {
	top: var(--_positron-notebook-selection-bar-inset);
	border-top-left-radius: var(--_positron-notebook-selection-bar-radius);
}
