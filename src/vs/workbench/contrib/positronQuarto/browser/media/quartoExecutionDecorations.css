/*---------------------------------------------------------------------------------------------
 *  Copyright (C) 2026 Posit Software, PBC. All rights reserved.
 *  Licensed under the Elastic License 2.0. See LICENSE.txt for license information.
 *--------------------------------------------------------------------------------------------*/

/* Gutter decorations for Quarto cell execution state */

/* Queued: hollow rectangle using the running color */
/* Base styles for all queued lines */
/* Width: 3px content + 1px left border + 1px right border = 5px total */
/* Note: !important needed to override Monaco's inline width style */
.monaco-editor .quarto-execution-queued-first,
.monaco-editor .quarto-execution-queued-middle,
.monaco-editor .quarto-execution-queued-last,
.monaco-editor .quarto-execution-queued-single {
	width: 3px !important;
	margin-left: 10px;
	border-left: 1px solid var(--vscode-editorGutter-quartoRunningBackground, #48985D);
	border-right: 1px solid var(--vscode-editorGutter-quartoRunningBackground, #48985D);
}

/* First line of multi-line cell: top border */
.monaco-editor .quarto-execution-queued-first {
	border-top: 1px solid var(--vscode-editorGutter-quartoRunningBackground, #48985D);
}

/* Last line of multi-line cell: bottom border */
.monaco-editor .quarto-execution-queued-last {
	border-bottom: 1px solid var(--vscode-editorGutter-quartoRunningBackground, #48985D);
}

/* Single-line cell: all borders */
.monaco-editor .quarto-execution-queued-single {
	border-top: 1px solid var(--vscode-editorGutter-quartoRunningBackground, #48985D);
	border-bottom: 1px solid var(--vscode-editorGutter-quartoRunningBackground, #48985D);
}

/* Running: filled rectangle with pulsing animation */
/* Multiple delay classes to create organic "twinkle" effect where each line pulses independently */
.monaco-editor .quarto-execution-running-0,
.monaco-editor .quarto-execution-running-1,
.monaco-editor .quarto-execution-running-2,
.monaco-editor .quarto-execution-running-3,
.monaco-editor .quarto-execution-running-4,
.monaco-editor .quarto-execution-running-5,
.monaco-editor .quarto-execution-running-6,
.monaco-editor .quarto-execution-running-7,
.monaco-editor .quarto-execution-running-8,
.monaco-editor .quarto-execution-running-9 {
	border-left: 5px solid var(--vscode-editorGutter-quartoRunningBackground, #48985D);
	margin-left: 10px;
	animation: quarto-pulse 1.5s ease-in-out infinite;
}

/* Error running: same animation but with red color */
.monaco-editor .quarto-execution-error-running-0,
.monaco-editor .quarto-execution-error-running-1,
.monaco-editor .quarto-execution-error-running-2,
.monaco-editor .quarto-execution-error-running-3,
.monaco-editor .quarto-execution-error-running-4,
.monaco-editor .quarto-execution-error-running-5,
.monaco-editor .quarto-execution-error-running-6,
.monaco-editor .quarto-execution-error-running-7,
.monaco-editor .quarto-execution-error-running-8,
.monaco-editor .quarto-execution-error-running-9 {
	border-left: 5px solid var(--vscode-editorGutter-quartoErrorBackground, #D32F2F);
	margin-left: 10px;
	animation: quarto-pulse 1.5s ease-in-out infinite;
}

/* Stagger animation start times across the 1.5s cycle */
.monaco-editor .quarto-execution-running-0 { animation-delay: 0s; }
.monaco-editor .quarto-execution-running-1 { animation-delay: -0.15s; }
.monaco-editor .quarto-execution-running-2 { animation-delay: -0.3s; }
.monaco-editor .quarto-execution-running-3 { animation-delay: -0.45s; }
.monaco-editor .quarto-execution-running-4 { animation-delay: -0.6s; }
.monaco-editor .quarto-execution-running-5 { animation-delay: -0.75s; }
.monaco-editor .quarto-execution-running-6 { animation-delay: -0.9s; }
.monaco-editor .quarto-execution-running-7 { animation-delay: -1.05s; }
.monaco-editor .quarto-execution-running-8 { animation-delay: -1.2s; }
.monaco-editor .quarto-execution-running-9 { animation-delay: -1.35s; }

/* Error running animation delays (same pattern) */
.monaco-editor .quarto-execution-error-running-0 { animation-delay: 0s; }
.monaco-editor .quarto-execution-error-running-1 { animation-delay: -0.15s; }
.monaco-editor .quarto-execution-error-running-2 { animation-delay: -0.3s; }
.monaco-editor .quarto-execution-error-running-3 { animation-delay: -0.45s; }
.monaco-editor .quarto-execution-error-running-4 { animation-delay: -0.6s; }
.monaco-editor .quarto-execution-error-running-5 { animation-delay: -0.75s; }
.monaco-editor .quarto-execution-error-running-6 { animation-delay: -0.9s; }
.monaco-editor .quarto-execution-error-running-7 { animation-delay: -1.05s; }
.monaco-editor .quarto-execution-error-running-8 { animation-delay: -1.2s; }
.monaco-editor .quarto-execution-error-running-9 { animation-delay: -1.35s; }

@keyframes quarto-pulse {
	0%, 100% {
		opacity: 1;
	}
	50% {
		opacity: 0.5;
	}
}

/* Completed: solid green that fades out */
.monaco-editor .quarto-execution-completed {
	border-left: 5px solid var(--vscode-editorGutter-quartoRunningBackground, #48985D);
	margin-left: 10px;
	opacity: 1;
}

/* Completed fading: transitions from solid to transparent */
.monaco-editor .quarto-execution-completed-fading {
	border-left: 5px solid var(--vscode-editorGutter-quartoRunningBackground, #48985D);
	margin-left: 10px;
	animation: quarto-fade-out 300ms ease-out forwards;
}

/* Error completed: solid red that fades out */
.monaco-editor .quarto-execution-error-completed {
	border-left: 5px solid var(--vscode-editorGutter-quartoErrorBackground, #D32F2F);
	margin-left: 10px;
	opacity: 1;
}

/* Error completed fading: transitions from solid red to transparent */
.monaco-editor .quarto-execution-error-completed-fading {
	border-left: 5px solid var(--vscode-editorGutter-quartoErrorBackground, #D32F2F);
	margin-left: 10px;
	animation: quarto-fade-out 300ms ease-out forwards;
}

@keyframes quarto-fade-out {
	from {
		opacity: 1;
	}
	to {
		opacity: 0;
	}
}

/* Overview ruler markers */
.monaco-editor .quarto-queued-overview-ruler,
.monaco-editor .quarto-running-overview-ruler {
	background-color: var(--vscode-editorGutter-quartoRunningBackground, #48985D);
}

.monaco-editor .quarto-error-overview-ruler {
	background-color: var(--vscode-editorGutter-quartoErrorBackground, #D32F2F);
}
