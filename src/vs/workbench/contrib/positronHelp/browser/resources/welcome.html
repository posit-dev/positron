<!DOCTYPE html>
<html>

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta http-equiv="Content-Security-Policy"
		content="media-src 'self'; script-src 'self' 'nonce-__nonce__'; style-src 'nonce-__nonce__'; frame-src *;">
	<style nonce="__nonce__">
		body {
			padding: 0;
			background-color: var(--vscode-editor-background);
		}

		.container {
			display: flex;
			flex-direction: column;
			justify-content: center;
			align-items: center;
			height: 100vh;
		}

		.header {
			display: flex;
			flex-direction: row;
			text-wrap-mode: nowrap;
			margin-bottom: 2em;
		}

		.logo {
			max-width: min(17.1vw, 6em);
			max-height: min(17.1vw, 6em);
			margin-right: 12px;
		}

		.header-text {
			display: flex;
			flex-direction: column;
			justify-content: center;
			align-items: flex-start;
		}

		.title {
			font-size: min(10vw, 3.5em);
			font-weight: 800;
			color: var(--vscode-positronWelcome-foreground);
			margin: 0;
			padding-top: 0.2em;
			line-height: 16px;
		}

		.caption {
			font-size: min(4.3vw, 1.5em);
			font-weight: 600;
			color: var(--vscode-positronWelcome-secondaryForeground);
			margin: 0.6em 0 0 0;
			text-wrap-mode: wrap;
		}

		ul {
			list-style-type: none;
			padding: 0;
			margin: 0;
		}
	</style>
</head>

<body>
	<div class="container">
		<div class="inner">
			<div class="header">
				<img src="__logoSrc__" alt="Positron Logo" class="logo">
				<div class="header-text">
					<h1 class="title">__productName__</h1>
					<h2 class="caption">an IDE for data science by Posit PBC</h2>
				</div>
			</div>
			<div>
				<ul>
					<li><a href="https://positron.posit.co/">Positron Documentation</a></li>
					<li><a href="https://github.com/posit-dev/positron/discussions">Positron Community Forum</a></li>
					<li><a href="command:workbench.action.openIssueReporter">Report a bug in Positron</a></li>
					<br />
					<li><a href="https://posit.co/resources/cheatsheets/">Posit Cheat Sheets</a></li>
					<li><a href="https://posit.co/products/">Posit Products</a></li>
					<li><a href="https://support.posit.co/">Posit Support</a></li>
				</ul>
			</div>
		</div>
	</div>

	<script nonce="__nonce__" async type="module">
		const vscode = acquireVsCodeApi();
		vscode.postMessage({
			"id": "positron-help-complete",
			"title": "Welcome",
		});

		document.addEventListener("click", (event) => {
			if (event.target.tagName === "A") {
				const href = event.target.getAttribute("href");
				if (href) {
					if (href.startsWith("command:")) {
						// If the link is a command, post it to the extension host.
						vscode.postMessage({
							"id": "positron-help-execute-command",
							"command": href.substring(8) // Remove "command:" prefix
						});
					} else {
						// Otherwise, treat it as a URL and navigate.
						vscode.postMessage({
							"id": "positron-help-navigate",
							"url": href
						});
					}
				}
			}
		});

		// Adds message listener.
		const addMessageListener = () => {
			// Add the event listener.
			window.addEventListener("message", (message) => {
				// Switch on the message ID.
				switch (message.data.id) {
					// positron-help-scroll-to message. Sent to scroll the window to a saved scroll
					// position. This message will arrive when the document's readyState becomes
					// interactive.
					case "positron-help-scroll-to":
						window.scrollTo(message.data.scrollX, message.data.scrollY);
						break;

					// positron-help-update-find message. Sent to start a new find operation.
					case "positron-help-update-find":
						// Reset selection so we are finding from the top of the document.
						window.getSelection().removeAllRanges();

						// If the find value was specified, perform the find.
						if (message.data.findValue) {
							// Perform the find.
							findResult = window.find(
								message.data.findValue,
								false, // aCaseSensitive
								false, // aBackwards
								false, // aWrapAround
								false, // aWholeWord - Unimplemented
								false // aSearchInFrames
							);

							// Post the find result.
							window.parent.postMessage(
								{
									id: "positron-help-find-result",
									findResult,
								},
								"*"
							);
						}
						break;

					// positron-help-find-previous message. Sent to find the previous occurance.
					case "positron-help-find-previous":
						if (findResult && message.data.findValue) {
							window.find(
								message.data.findValue,
								false, // aCaseSensitive
								true, // aBackwards
								false, // aWrapAround
								false, // aWholeWord - Unimplemented
								false // aSearchInFrames
							);
						}
						break;

					// positron-help-find-previous message. Sent to find the next occurance.
					case "positron-help-find-next":
						if (findResult && message.data.findValue) {
							window.find(
								message.data.findValue,
								false, // aCaseSensitive
								false, // aBackwards
								false, // aWrapAround
								false, // aWholeWord - Unimplemented
								false // aSearchInFrames
							);
						}
						break;

					// positron-help-focus message. Sent to focus the help window.
					case "positron-help-focus":
						window.focus();
						break;

					// positron-help-copy-selection message. Sent to copy the selection.
					case "positron-help-copy-selection":
						// Post the positron-help-selection message.
						window.parent.postMessage(
							{
								id: "positron-help-copy-selection",
								selection: window.getSelection().toString(),
							},
							"*"
						);
						break;
				}
			});
		};

		addMessageListener();
	</script>
</body>

</html>
